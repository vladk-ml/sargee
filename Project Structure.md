
**Project Directory Structure:**

```
sargee/
├── main.py          # Main application entry point
├── aoi_manager/       # Module for AOI handling
│   ├── __init__.py
│   └── aoi.py      # AOI class, reading/writing GeoJSON, etc.
├── ui/              # UI related files
│   ├── __init__.py
│   ├── main_window.py # Main window class and logic
│   ├── resources.py   # Compiled Qt resources (icons, etc.)
│   ├── styles.qss   # Qt style sheets (if needed)
│   └── <ui_files_designed_with_qt_designer>.ui # or defined purely on python, one for each window you design
├── gee_interface/   # Module for interacting with GEE
│   ├── __init__.py
│   ├── gee_utils.py    # Functions for authentication, filtering, metadata
│   ├── image_viewer.py # Handles the folium, maplibre or GEE JavaScript API, and image tile display in web view, potentially define IPC handlers here if you choose to work with this
├── utils/           # General utility functions
│   ├── __init__.py
│   └── helpers.py
├── resources/       # Icons, images, etc.
├── tests/           # Unit tests
│   ├── __init__.py
│   ├── test_aoi.py
│   └── test_gee_utils.py
├── data/             # This is where the user's AOI files will be stored
├── requirements.txt   # Lists project dependencies
└── .gitignore         # Specifies files and folders to be ignored by Git
```

**File Descriptions:**

*   `main.py`:
    *   The entry point for the application.
    *   Creates the main application window.
    *   Initializes the event loop.

*   `aoi_manager/__init__.py`
    *   Defines AOI related functionalities.

*   `aoi_manager/aoi.py`:
    *   `AOI` class:
        *   Loads and saves GeoJSON files using `geopandas`.
        *   Handles AOI geometry, names, etc.

*   `ui/main_window.py`:
    *   `MainWindow` class:
        *   Sets up UI layout (using .ui files or directly in code), like where to define handlers for sending messages from QtWebEngine Javascript side to python, if you opt to use **maplibre** and such.
        *   Connects signals to slots (e.g., button clicks to actions).
        *   Manages the map view and data display.

*   `ui/resources.py` (generated by Qt):
    *   A compiled binary file of resources like icons and images that you add to your application (if needed). Use the pyrcc tool for this.

*   `ui/<ui_files_designed_with_qt_designer>.ui`:
    *   UI design files created using Qt Designer.

*   `ui/styles.qss` (optional):
    *   A Qt style sheet to customize the appearance of the app.

*   `gee_interface/gee_utils.py`:
    *   Functions to:
        *   Authenticate with GEE (using the Python API).
        *   Filter image collections (might need a JavaScript function).
        *   Get image metadata and calculate image counts.
    *   Defines functions for retrieving map tiles and interacting with the embedded map (for drawing controls for example, define what should happen, but defer actual functionality to the web view side).

*   `gee_interface/image_viewer.py`
    *   Functions to:
        *   Manage and configure embedded map view for visualization of image tiles or maps
        *   May include configuration for Javascript IPC, to define actual functionality for function stubs defined in `gee_utils.py`, as mentioned before

*   `utils/helpers.py`:
    *   General utility functions used across the project (e.g., date formatting, data processing).

*   `resources/`:
    *   A folder for icons, images, and other static assets.

*   `tests/test_aoi.py`:
    *   Unit tests for the `AOI` class.

*   `tests/test_gee_utils.py`:
    *   Unit tests for GEE interaction functions.

*   `data/`:
    *   An empty directory that will be the default location where the user's AOI GeoJSON files are stored.

*   `requirements.txt`:
    *   Lists all the Python packages that your project depends on (e.g., `PyQt`, `geopandas`, `earthengine-api`, etc.).

**.gitignore:**
    *   Specifies files/folders to be excluded from Git version control (e.g., virtual environment directory, compiled UI files).

**Getting Started - Development Steps**

1. **Project Setup:**
    *   Create the directory structure.
    *   Set up a Python virtual environment (`python3 -m venv .venv`) inside the project directory.
    *   Activate the virtual environment (`source .venv/bin/activate` on Linux/macOS or `.venv\Scripts\activate` on Windows).
    *   Install required packages using pip: `pip install -r requirements.txt`

2. **Dummy `requirements.txt`**

    ```text
    # UI framework
    PyQt6==6.6.1 # Check for your compatible version and license
    # GEE API
    earthengine-api==0.1.388 # Check for latest version
    # Data handling
    geopandas==0.14.2
    pandas==2.1.4 # Check for latest compatible version
    # Mapping (If using folium, add it)
    # folium==0.15.1 # Or whichever version you like
    # Git integration (if needed later)
    # GitPython==3.1.41
    # You may need other dependencies based on development later
    # It would be easier if we generate it automatically after
    ```

3. **Create Basic Files:**
    *   Create the directories and empty `__init__.py` files.
    *   Start creating basic structures for the files listed in the outline. For example, you might define empty classes or functions as placeholders in `main.py`, `aoi.py`, `main_window.py`, `gee_utils.py` and other files to add code gradually.

4. **UI Design (Qt Designer or Code):**
    *   If you want a simple map for selecting AOIs (folium), use Qt Designer for visual design and generate `.ui` files. Use `pyuic` to compile those `.ui` files, it will be automatically added after installing `PyQt` (e.g., `pyuic6 main_window.ui -o main_window.py`). Then proceed to configure embedded **folium** or write Javascript code for managing a map view.
    *   For better control and performance with large raster/vector data (maplibre), consider coding your UI and configuring **QtWebEngine** to show them, this involves writing custom HTML templates, define handlers for loading raster tiles to send it to maplibre. You might be able to have better interactivity with the GEE JavaScript API here, compared to using **folium**

**Example (`main.py`)**

```python
import sys
from PyQt6.QtWidgets import QApplication, QMainWindow

# from ui.main_window import MainWindow  # Assuming you generated the UI class

# Placeholder for the main application window (you will need to complete this)
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("SAR AOI App")

def main():
    app = QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec())

if __name__ == "__main__":
    main()
```


